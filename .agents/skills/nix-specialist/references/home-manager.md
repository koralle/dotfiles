# Home Manager

## 1. 目的

ユーザー単位の設定を宣言的に管理し、NixOS/nix-darwinのシステム設定と責務分離するための参照。

## 2. 要点

- Home Managerはシステム全体ではなくユーザー環境を管理する。
- シェル、エディタ、Git、CLI設定などを一元化できる。
- NixOS/nix-darwin側の設定と競合しないよう責務を分ける。
- Flakes構成では `homeConfigurations` を明示する設計が有効。
- 複数ユーザーを扱う場合は共通設定と個別設定を分離する。

## 3. 責務分離の目安

- システムサービスやOS設定はNixOS/nix-darwinに置く。
- ユーザーアプリ設定やdotfilesはHome Managerに置く。
- 同じ対象を二重管理しない。

## 4. 誤りやすい点

- システム設定とユーザー設定の境界を曖昧にする。
- 1ファイルに過剰集約し、意図の追跡が難しくなる。
- 一時変更を直接ホーム配下に入れて宣言との差分を増やす。

## 5. ベストプラクティス

- 役割単位でモジュール分割し、再利用しやすく保つ。
- プロファイル単位で有効化スイッチを設ける。
- 変更反映手順を固定し、毎回同じ検証を行う。
